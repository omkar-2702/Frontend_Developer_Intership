<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Catering Reservation & Ordering System</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="styles.css">
</head>
<body>

<!-- Navbar -->
<nav>
    <h4>Catering Reservation & Ordering System</h4>
</nav>

<!-- Main Layout -->
<div class="main-layout">

    <!-- LEFT SIDE : LOGIN / REGISTER -->
    <div class="left-panel">
        <div class="auth-container">

            <h2 id="formTitle">Login</h2>

            <!-- Role Selection -->
            <div class="role-buttons">
                <button id="adminBtn" class="active" onclick="selectRole('Admin')">Admin</button>
                <button id="userBtn" onclick="selectRole('User')">User</button>
            </div>

            <!-- Form -->
            <form id="authForm">
                <div class="form-group">
                    <label>Email</label>
                    <input type="email" required>
                </div>

                <div class="form-group">
                    <label>Password</label>
                    <input type="password" required>
                </div>

                <div class="form-group" id="nameField" style="display:none;">
                    <label>Full Name</label>
                    <input type="text">
                </div>

                <button class="btn" type="submit" id="submitBtn">Login</button>
            </form>

            <div class="toggle">
                <p id="toggleText">
                    Don't have an account?
                    <span onclick="toggleForm()">Register</span>
                </p>
            </div>

        </div>
    </div>

    <!-- RIGHT SIDE : ABOUT + CONTACT -->
    <div class="right-panel">

        <section class="info-section">
            <h2>About Us</h2>
            <p>
                The Catering Reservation and Ordering System is a web-based platform
                that helps catering businesses manage products and customer orders.
            </p>
            <p>
                <b>Admins</b> can upload catering services and manage orders, while
                <b>Users</b> can browse services and place orders easily.
            </p>
        </section>

        <section class="info-section">
            <h2>Contact Us</h2>
            <p><b>Email:</b> support@cateringsystem.com</p>
            <p><b>Phone:</b> +91 98765 43210</p>
            <p><b>Address:</b> Nagpur, Maharashtra, India</p>
        </section>

    </div>
</div>

<!-- Footer -->
<footer>
    &copy; 2025 Catering Reservation & Ordering System
</footer>

<script>
let isLogin = true;
let selectedRole = "Admin";

function selectRole(role) {
    selectedRole = role;
    document.getElementById("adminBtn").classList.remove("active");
    document.getElementById("userBtn").classList.remove("active");

    role === "Admin"
        ? document.getElementById("adminBtn").classList.add("active")
        : document.getElementById("userBtn").classList.add("active");
}

function toggleForm() {
    isLogin = !isLogin;
    document.getElementById("formTitle").innerText = isLogin ? "Login" : "Register";
    document.getElementById("submitBtn").innerText = isLogin ? "Login" : "Register";
    document.getElementById("nameField").style.display = isLogin ? "none" : "block";
    document.getElementById("toggleText").innerHTML =
        isLogin
            ? `Don't have an account? <span onclick="toggleForm()">Register</span>`
            : `Already have an account? <span onclick="toggleForm()">Login</span>`;
}

document.getElementById("authForm").addEventListener("submit", function (e) {
    e.preventDefault();

    const email = document.querySelector("input[type='email']").value;
    const password = document.querySelector("input[type='password']").value;
    const nameInput = document.querySelector("#nameField input");

    const storageKey = selectedRole === "Admin" ? "admins" : "users";
    let accounts = JSON.parse(localStorage.getItem(storageKey)) || [];

    /* ---------- REGISTER ---------- */
    if (!isLogin) {
        if (!nameInput.value.trim()) {
            alert("Please enter full name");
            return;
        }

        const exists = accounts.some(acc => acc.email === email);
        if (exists) {
            alert("Account already exists. Please login.");
            return;
        }

        accounts.push({
            name: nameInput.value,
            email,
            password
        });

        localStorage.setItem(storageKey, JSON.stringify(accounts));
        alert("Registration successful! Please login.");
        toggleForm();
        return;
    }

    /* ---------- LOGIN ---------- */
    const user = accounts.find(
        acc => acc.email === email && acc.password === password
    );

    if (!user) {
        alert("Invalid credentials or user not registered");
        return;
    }

    // Save session
    localStorage.setItem("loggedInUser", email);
    localStorage.setItem("role", selectedRole);

    // Redirect
    if (selectedRole === "Admin") {
        window.location.href = "admin-dashboard.html";
    } else {
        window.location.href = "user-dashboard.html";
    }
});
</script>


</body>
</html>
